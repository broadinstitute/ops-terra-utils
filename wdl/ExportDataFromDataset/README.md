# WDL Input Overview

This WDL script takes a dataset ID from a Terra Data Repository (TDR) and copies all associated files to the specified Google Cloud Storage bucket. The download process can be either flat or structured based on the `download_type` parameter. In flat mode, all files are copied to the root of the specified bucket, while in structured mode, the original file paths from the dataset are preserved. Users can also configure the maximum retry count and backoff time for handling failed downloads. By default, a custom Docker image is used for the execution.

## Inputs Table:
 This workflow is designed to use `Run workflow with inputs defined by file paths` option. You can use `Run workflow(s) with inputs defined by data table` option if you set up data table specifically to use this wdl.

| Input Name           | Description                                                                                                                                                                                        | Type     | Required | Default                                                                                       |
|----------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------|----------|-----------------------------------------------------------------------------------------------|
| **dataset_id**       | The unique identifier of the TDR dataset containing the files to download.                                                                                                                         | String   | Yes      | N/A                                                                                           |
| **output_bucket**    | The Google Cloud Storage bucket where the files will be downloaded.                                                                                                                                | String   | Yes      | N/A                                                                                           |
| **download_type**    | Specifies the download type. Choices are `flat` or `structured`. In `flat`, files are downloaded to the root of the output bucket; in `structured`, the original file path structure is preserved. | String   | Yes      | N/A                                                                                           |
| **max_backoff_time** | The maximum backoff time, in seconds, for a failed request. Optional.                                                                                                                              | Int      | No       | 300                                                                                           |
| **max_retries**      | The maximum number of retries for a failed request. Optional.                                                                                                                                      | Int      | No       | 5                                                                                             |
| **docker**           | Specifies a custom Docker image to use. Optional.                                                                                                                                                  | String   | No       | us-central1-docker.pkg.dev/operations-portal-427515/ops-toolbox/ops_terra_utils_slim:latest   |

## Outputs Table:
This script does not generate any outputs directly. However, logs will be provided to track the progress of the file download process, including any retries or errors encountered. You can review the logs in the stderr file for details on the file transfer process and the status of the download operations.
