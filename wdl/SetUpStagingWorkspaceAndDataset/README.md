# WDL Input Overview
This workflow automates the process of setting up a staging workspace in Terra and a staging dataset in TDR. The name of the dataset will be used to generate the workspace name.


## Inputs Table:
 This workflow is designed to use `Run workflow with inputs defined by file paths` option. You can use `Run workflow(s) with inputs defined by data table` option if you set up data table specifically to use this wdl.

| Input Name                   | Description                                                                                                                                                                                                   | Type    | Required | Default                                                                                     |
|------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------|----------|---------------------------------------------------------------------------------------------|
| **dataset_name**             | The name of the TDR dataset which will be created.                                                                                                                                                            | String  | Yes      | N/A                                                                                         |
| **tdr_billing_profile_uuid** | The billing profile UUID for the TDR dataset.                                                                                                                                                                 | String  | Yes      | N/A                                                                                         |
| **terra_billing_project**    | The billing project to use for the target Terra workspace.                                                                                                                                                    | String  | Yes      | N/A                                                                                         |
| **controlled_access**        | Whether the Terra workspace/TDR dataset should have controlled access                                                                                                                                         | Boolean | Yes      | N/A                                                                                         |
| **resource_owners**          | Comma separate list of resource owner(s). At least one resource owner is required. Do not include spaces between entries (i.e. use the following format: "user1@broadinstitute.org,user2@broadinstitute.org") | String  | Yes      | N/A                                                                                         |
| **continue_if_exists**       | Whether to continue even if the workspace/dataset already exists.                                                                                                                                             | Boolean | Yes      | N/A                                                                                         |
| **delete_existing_dataset**  | Delete existing dataset if one already exists. Deleting dataset WILL fail if snapshots still exist.                                                                                                           | Boolean | Yes      | N/A                                                                                         |
| **current_user_email**       | The email of the current user (used for removing current user from workspace)                                                                                                                                 | String  | Yes      | N/A                                                                                         |
| **dataset_self_hosted**      | If the dataset should be self hosted. If used then files are NOT copied into the dataset and just referenced.                                                                                                 | Boolean | Yes      | N/A                                                                                         |
| **dbgap_consent_code**       | The dbGaP consent code (if it exists). Optional.                                                                                                                                                              | String  | No       | N/A                                                                                         |
| **phs_id**                   | The PHS id if it exists. Optional.                                                                                                                                                                            | String  | No       | N/A                                                                                         |
| **duos_identifier**          | The DUOS identifier (if it exists). Optional                                                                                                                                                                  | String  | No       | N/A                                                                                         |
| **wdls_to_import**           | A comma separate list of WDLs to import. Optional. Do not include spaces between entries (i.e. user the following format: "Workflow1,Workflow2")                                                              | String  | No       | N/A                                                                                         |
| **notebooks_to_import**      | A comma separate list of notebooks to import. Optional. Do not include spaces between entries (i.e. user the following format: "Notebook1.ipynb,Notebook2.ipynb")                                             | String  | No       | N/A                                                                                         |
| **resource_members**         | Comma separate list of resource members (if they exist). Optional. Do not include spaces between entries (i.e. use the following format: "user1@broadinstitute.org,user2@broadinstitute.org")                 | String  | No       | N/A                                                                                         |
| **workspace_version**        | An optional version number to append to the workspace name. This is useful when one batch of data has already been imported to a dataset and another batch needs to be imported before publicizing the data.  | Int     | No       | N/A                                                                                         |
| **is_anvil**                 | Whether the workspace is for AnVIL. If true, uses AnVIL-specific workspace description.                                                                                                                       | Boolean | No       | N/A                                                                                         |
| **docker**                   | The docker image                                                                                                                                                                                              | String  | No       | us-central1-docker.pkg.dev/operations-portal-427515/ops-toolbox/ops_terra_utils_slim:latest |

## Outputs Table:
This script does not generate any direct outputs. But the target workspace and dataset will be generated if the workflow completes successfully. The logs, which include any errors or warnings, can be reviewed in the stderr file for additional details about the process.

delete_existing_dataset
